<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FRICTION Analysis Interface Module (AIM): FRICTION AIM Examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FRICTION Analysis Interface Module (AIM)
   </div>
   <div id="projectbrief">FRICTION Analysis Interface Module (AIM)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">FRICTION AIM Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#frictionAimPrereq">Prerequisites</a><ul><li class="level2"><a href="#frictionReqfiles">Script files</a></li>
</ul>
</li>
<li class="level1"><a href="#createGeom">Creating Geometry using ESP</a></li>
<li class="level1"><a href="#frictionPyCAPS">Performing analysis using pyCAPS</a></li>
</ul>
</div>
<div class="textblock"><p>This is a walkthrough for using FRICTION AIM to analyze a wing, tail, fuselage configuration.</p>
<h1><a class="anchor" id="frictionAimPrereq"></a>
Prerequisites</h1>
<p>It is presumed that ESP and CAPS have been already installed, as well as FRICTION. Furthermore, a user should have knowledge on the generation of parametric geometry in Engineering Sketch Pad (ESP) before attempting to integrate with any AIM. Specifically this example makes use of Design Parameters, Set Parameters, User Defined Primitive (UDP) and attributes in ESP.</p>
<h2><a class="anchor" id="frictionReqfiles"></a>
Script files</h2>
<p>Two scripts are used for this illustration:</p><ol type="1">
<li>frictionWingTailFuselage.csm: Creates geometry, as described in the following section.</li>
<li>friction_PyTest.py: pyCAPS script for performing analysis, as described in <a class="el" href="frictionExample.html#frictionPyCAPS">Performing analysis using pyCAPS</a>.</li>
</ol>
<h1><a class="anchor" id="createGeom"></a>
Creating Geometry using ESP</h1>
<p>The CSM script generates Bodies which are designed to be used by specific AIMs. The AIMs that the Body is designed for is communicated to the CAPS framework via the “capsAIM” string attribute. This is a semicolon-separated string with the list of AIM names. Thus, the CSM author can give a clear indication to which AIMs should use the Body. In this example, the list contains only the frictionAIM: </p><div class="fragment"><div class="line">attribute capsAIM $frictionAIM</div>
</div><!-- fragment --><p> FRICTION input is always in feet, to enable automatic conversion, the geometric attribute <b>capsLength</b> may be used to define the units the geometry (*.csm) file is in. </p><div class="fragment"><div class="line">attribute capsLength $m</div>
</div><!-- fragment --><p> Next we will define the design parameters to define the wing cross section and planform. </p><div class="fragment"><div class="line">despmtr   thick     0.12      frac of local chord</div>
<div class="line">despmtr   camber    0.04      frac of loacl chord</div>
<div class="line">despmtr   tlen      5.00      length from wing LE to Tail LE</div>
<div class="line">despmtr   toff      0.5       tail offset</div>
<div class="line"> </div>
<div class="line">despmtr   area      10.0</div>
<div class="line">despmtr   aspect    6.00</div>
<div class="line">despmtr   taper     0.60</div>
<div class="line">despmtr   sweep     20.0      deg (of c/4)</div>
<div class="line"> </div>
<div class="line">despmtr   washout  -5.00      deg (down at tip)</div>
<div class="line">despmtr   dihedral  4.00      deg</div>
</div><!-- fragment --><p> The design parameters will then be used to set parameters for use internally to create geometry. </p><div class="fragment"><div class="line">set       span      sqrt(aspect*area)</div>
<div class="line">set       croot     2*area/span/(1+taper)</div>
<div class="line">set       ctip      croot*taper</div>
<div class="line">set       dxtip     (croot-ctip)/4+span/2*tand(sweep)</div>
<div class="line">set       dztip     span/2*tand(dihedral)</div>
</div><!-- fragment --><p> Next the Wing, Vertical and Horizontal tails are created using the <em>naca</em> User Defined Primitive (UDP). The inputs used for this example to the UDP are Thickness and Camber. The naca sections generated are in the X-Y plane and are rotated to the X-Z plane. They are then translated to the appropriate position based on the design and set parameters defined above. Finally reference area can be given to the FRICTION AIM by using the <b>capsReferenceArea</b> attribute. If this attribute exists on any body that value is used otherwise the default is 1.0.</p>
<p>In addition, each section has a <b>capsType</b> attribute. This is used to logically group sections together. More information on this can be found in the <a class="el" href="attributeFRICTION.html">AIM Attributes</a> section. </p><div class="fragment"><div class="line"># right tip</div>
<div class="line">udprim    naca      Thickness thick     Camber    camber</div>
<div class="line">attribute capsReferenceArea area</div>
<div class="line">attribute capsType   $Wing</div>
<div class="line">scale     ctip</div>
<div class="line">rotatex   90        0         0</div>
<div class="line">rotatey   washout   0         ctip/4</div>
<div class="line">translate dxtip    -span/2    dztip</div>
<div class="line"> </div>
<div class="line"># root</div>
<div class="line">udprim    naca      Thickness thick     Camber    camber</div>
<div class="line">attribute capsType   $Wing</div>
<div class="line">rotatex   90        0         0</div>
<div class="line">scale     croot</div>
<div class="line"> </div>
<div class="line"># left tip</div>
<div class="line">udprim    naca      Thickness thick     Camber    camber</div>
<div class="line">attribute capsType  $Wing</div>
<div class="line">scale     ctip</div>
<div class="line">rotatex   90        0         0</div>
<div class="line">rotatey   washout   0         ctip/4</div>
<div class="line">translate dxtip     span/2    dztip</div>
</div><!-- fragment --><p> Vertical Tail definition </p><div class="fragment"><div class="line"># tip</div>
<div class="line">udprim    naca      Thickness thick</div>
<div class="line">attribute capsType  $VTail</div>
<div class="line">scale     0.75*ctip</div>
<div class="line">translate tlen+0.75*(croot-ctip) 0.0 ctip+toff</div>
<div class="line"> </div>
<div class="line"># root</div>
<div class="line">udprim    naca      Thickness thick</div>
<div class="line">attribute capsType  $VTail</div>
<div class="line">scale     0.75*croot</div>
<div class="line">translate tlen 0.0 toff</div>
</div><!-- fragment --><p> Horizontal Tail definition </p><div class="fragment"><div class="line"># tip left</div>
<div class="line">udprim    naca      Thickness thick</div>
<div class="line">attribute capsType  $HTail</div>
<div class="line">scale     0.75*ctip</div>
<div class="line">rotatex   90        0         0</div>
<div class="line">translate tlen+0.75*(croot-ctip) -ctip toff</div>
<div class="line"> </div>
<div class="line"># tip right</div>
<div class="line">udprim    naca      Thickness thick</div>
<div class="line">attribute capsType  $HTail</div>
<div class="line">scale     0.75*ctip</div>
<div class="line">rotatex   90        0         0</div>
<div class="line">translate tlen+0.75*(croot-ctip) ctip toff</div>
</div><!-- fragment --><p> Fuselage definition. Notice the use of the ellipse UDP. In this case, only translation is required to move the cross section into the desired location. </p><div class="fragment"><div class="line">point -0.4*tlen 0.0 0.0</div>
<div class="line">attribute capsType $Fuse</div>
<div class="line"> </div>
<div class="line">udprim  ellipse ry 0.5*croot rz 0.2*croot</div>
<div class="line">attribute capsType $Fuse</div>
<div class="line">translate 0.0 0.0 0.0</div>
<div class="line"> </div>
<div class="line">udprim  ellipse ry 0.4*croot rz 0.1*croot</div>
<div class="line">attribute capsType $Fuse</div>
<div class="line">translate croot 0.0 0.0</div>
<div class="line"> </div>
<div class="line">udprim  ellipse ry 0.1*croot rz 0.1*croot</div>
<div class="line">attribute capsType $Fuse</div>
<div class="line">translate tlen 0.0 toff</div>
<div class="line"> </div>
<div class="line">udprim  ellipse ry 0.01*croot rz 0.01*croot</div>
<div class="line">attribute capsType $Fuse</div>
<div class="line">translate tlen+0.75*croot 0.0 toff</div>
</div><!-- fragment --> <h1><a class="anchor" id="frictionPyCAPS"></a>
Performing analysis using pyCAPS</h1>
<p>An example pyCAPS script that uses the above *.csm file to run FRICTION is as follows.</p>
<p>First the pyCAPS and os module needs to be imported. </p><div class="fragment"><div class="line"><span class="comment"># Import pyCAPS module</span></div>
<div class="line"><span class="keyword">import</span> pyCAPS</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Import os module</span></div>
<div class="line"><span class="keyword">import</span> os</div>
<div class="line"><span class="keyword">import</span> argparse</div>
</div><!-- fragment --><p> Local variables used throughout the script are defined. </p><div class="fragment"><div class="line"><span class="comment"># Create working directory variable</span></div>
<div class="line">workDir = os.path.join(str(args.workDir[0]), <span class="stringliteral">&quot;FrictionAnalysisTest&quot;</span>)</div>
</div><!-- fragment --><p> Once the modules have been loaded the problem needs to be initiated with the *.csm file, and design parameter is changed - area in the geometry. Any despmtr from the frictionWingTailFuselage.csm file is available inside the pyCAPS script. They are: thick, camber, area, aspect, taper, sweep, washout, dihedral...</p>
<div class="fragment"><div class="line">geometryScript = os.path.join(<span class="stringliteral">&quot;..&quot;</span>,<span class="stringliteral">&quot;csmData&quot;</span>,<span class="stringliteral">&quot;frictionWingTailFuselage.csm&quot;</span>)</div>
<div class="line">myProblem = pyCAPS.Problem(problemName=workDir,</div>
<div class="line">                           capsFile=geometryScript,</div>
<div class="line">                           outLevel=args.outLevel)</div>
<div class="line"> </div>
<div class="line">myProblem.geometry.despmtr.area = 10.0</div>
</div><!-- fragment --><p> The FRICTION AIM is then loaded with: </p><div class="fragment"><div class="line">myAnalysis = myProblem.analysis.create( aim = <span class="stringliteral">&quot;frictionAIM&quot;</span> )</div>
</div><!-- fragment --><p> After the AIM is loaded, the Mach number and Altitude are set (see <a class="el" href="aimInputsFRICTION.html">AIM Inputs</a> for additional inputs). The FRICTION AIM supports variable length inputs. For example 1 or 10 or more, Mach and Altitude pairs can be entered. The example below shows two inputs. Note that the length of the Mach and Altitude inputs must be the same. </p><div class="fragment"><div class="line"> </div>
<div class="line">myAnalysis.input.Mach = [0.5, 1.5]</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Note: friction wants kft (defined in the AIM) - Automatic unit conversion to kft</span></div>
<div class="line">myAnalysis.input.Altitude = [9000, 18200.0]*pyCAPS.Unit(<span class="stringliteral">&quot;m&quot;</span>)</div>
</div><!-- fragment --><p> Once all the inputs have been set, outputs can be directly requested. The FRICTION analysis will be automatically executed just-in-time (<a class="el" href="aimExecuteFRICTION.html">AIM Execution</a>).</p>
<p>Any of the AIM's output variables (<a class="el" href="aimOutputsFRICTION.html">AIM Outputs</a>) are readily available; for example, </p><div class="fragment"><div class="line">Cdtotal = myAnalysis.output.CDtotal</div>
<div class="line">CdForm  = myAnalysis.output.CDform</div>
<div class="line">CdFric  = myAnalysis.output.CDfric</div>
</div><!-- fragment --><p> Printing the above variables results in, </p><div class="fragment"><div class="line">Total drag = [0.01321, 0.01227]</div>
<div class="line">Form drag = [0.00331, 0.00308]</div>
<div class="line">Friction drag = [0.0099, 0.00919]</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jul 2 2022 10:12:16 for FRICTION Analysis Interface Module (AIM) by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
