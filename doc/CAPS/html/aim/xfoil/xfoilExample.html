<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>xFoil Analysis Interface Module (AIM): xFoil AIM Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">xFoil Analysis Interface Module (AIM)
   </div>
   <div id="projectbrief">xFoil Analysis Interface Module (AIM)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">xFoil AIM Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#xfoilPrereq">Prerequisites</a><ul><li class="level2"><a href="#xfoilReqfiles">Script files</a></li>
</ul>
</li>
<li class="level1"><a href="#createGeom">Creating Geometry using ESP</a></li>
<li class="level1"><a href="#xfoilPyCAPS">Performing analysis using pyCAPS</a></li>
<li class="level1"><a href="#runfun3dTetgenExample">Executing pyCAPS script</a></li>
</ul>
</div>
<div class="textblock"><p>This is a walkthrough for using xFoil AIM to analyze a single airfoil cross-section.</p>
<h1><a class="anchor" id="xfoilPrereq"></a>
Prerequisites</h1>
<p>It is presumed that ESP and CAPS have been already installed, as well as xFoil.</p>
<h2><a class="anchor" id="xfoilReqfiles"></a>
Script files</h2>
<p>Two scripts are used for this illustration:</p><ol type="1">
<li>airfoilSection.csm: Creates geometry, as described in [Part 1] of the next section.</li>
<li>xfoil_PyTest.py: pyCAPS script for performing analysis, as described in the [Part 2] of the next section.</li>
</ol>
<h1><a class="anchor" id="createGeom"></a>
Creating Geometry using ESP</h1>
<p>In our example *.csm file setting up the CAPS fidelity is the first step. If multiple bodies exist in the *.csm file the tag, capsIntent, can be used to distinguish what type of analysis the body may be used for. In this example, the geometry model generated can be used for CFD analysis, as shown:</p>
<div class="fragment"><div class="line">attribute capsIntent       $LINEARAERO</div>
<div class="line">attribute capsAIM $xfoilAIM;tsfoilAIM;msesAIM</div>
</div><!-- fragment --><p> A typical geometry model can be created and interactively modified using design parameters. These design parameters are either design- or geometry- based. In this example, a single airfoil cross-section is created using the following design parameters. </p><div class="fragment"><div class="line">despmtr   thick     0.12      frac of local chord</div>
<div class="line">despmtr   camber    0.00      frac of local chord</div>
<div class="line">despmtr   area      10.0      Planform area of the full span wing</div>
<div class="line">despmtr   aspect    6.00      Span^2/Area</div>
<div class="line">despmtr   taper     0.60      TipChord/RootChord</div>
</div><!-- fragment --><p> After our design parameters are defined they are used to setup other local variables (analytically) for the wing. </p><div class="fragment"><div class="line">set       span      sqrt(aspect*area)</div>
<div class="line">set       croot     2*area/span/(1+taper)</div>
<div class="line">set       ctip      croot*taper</div>
</div><!-- fragment --><p> Once all design and locale variables are defined, a single airfoil cross-section is created using the NACA series airfoils (following a scale). </p><div class="fragment"><div class="line">udprim    naca      Thickness thick     Camber    camber sharpte 1</div>
<div class="line">scale     ctip</div>
</div><!-- fragment --> <h1><a class="anchor" id="xfoilPyCAPS"></a>
Performing analysis using pyCAPS</h1>
<p>The first step in the pyCAPS script is to import the required modules. For this example, the following modules are used, </p><div class="fragment"><div class="line"><span class="comment"># Import pyCAPS module</span></div>
<div class="line"><span class="keyword">import</span> pyCAPS</div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> os</div>
<div class="line"><span class="keyword">import</span> argparse</div>
</div><!-- fragment --><p> Similarly, local variables used throughout the script may be defined. </p><div class="fragment"><div class="line"><span class="comment"># Create working directory variable</span></div>
<div class="line">workDir = <span class="stringliteral">&quot;xFoilAnalysisTest&quot;</span></div>
<div class="line">workDir = os.path.join(str(args.workDir[0]), workDir)</div>
</div><!-- fragment --><p> Once the required modules have been loaded, a pyCAPS.Problem can be instantiated with the desired geometry file.</p>
<div class="fragment"><div class="line">geometryScript = os.path.join(<span class="stringliteral">&quot;..&quot;</span>,<span class="stringliteral">&quot;csmData&quot;</span>,<span class="stringliteral">&quot;airfoilSection.csm&quot;</span>)</div>
<div class="line">myProblem = pyCAPS.Problem(problemName=workDir,</div>
<div class="line">                           capsFile=geometryScript,</div>
<div class="line">                           outLevel=args.outLevel)</div>
</div><!-- fragment --><p> Any design parameters available in *.csm file are also available within the pyCAPS script. The following snippet changes the despmtr "camber" which will force a rebuild of the geometry that xFoil will now use. </p><div class="fragment"><div class="line"><span class="comment"># Change a design parameter - area in the geometry</span></div>
<div class="line">myProblem.geometry.despmtr.camber = 0.1</div>
</div><!-- fragment --><p> Next the xFoil AIM needs to be loaded. </p><div class="fragment"><div class="line"><span class="comment"># Load xfoil aim</span></div>
<div class="line">xfoil = myProblem.analysis.create(aim = <span class="stringliteral">&quot;xfoilAIM&quot;</span>)</div>
</div><!-- fragment --><p> Once loaded analysis parameters specific to xFoil need to be set (see <a class="el" href="aimInputsXFOIL.html">AIM Inputs</a>). These parameters are automatically converted into xFoil specific format and transferred into the xFoil configuration file.</p>
<div class="fragment"><div class="line"><span class="comment"># Set Mach number, Reynolds number</span></div>
<div class="line">xfoil.input.Mach = 0.5</div>
<div class="line">xfoil.input.Re   = 1.0e6</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Set custom AoA</span></div>
<div class="line">xfoil.input.Alpha = [0.0, 3.0, 5.0, 7.0, 9.0, 11, 13, 14, 15.0]</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Set AoA seq</span></div>
<div class="line"><span class="comment">#xfoil.input.Alpha_Increment = [1.0, 2.0, 0.10]</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Set custom Cl</span></div>
<div class="line"><span class="comment">#xfoil.input.CL = 0.1</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Set Cl seq</span></div>
<div class="line"><span class="comment">#xfoil.input.CL_Increment = [0.8, 3, .25]</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Append the polar file if it already exists - otherwise the AIM will delete the file</span></div>
<div class="line">xfoil.input.Append_PolarFile = <span class="keyword">True</span></div>
</div><!-- fragment --><p> The xFoil AIM auto executes xfoil just-in-time when oututs are requested (<a class="el" href="aimExecuteXFOIL.html">AIM Execution</a>).</p>
<p>Finally, available AIM outputs (see <a class="el" href="aimOutputsXFOIL.html">AIM Outputs</a>) may be retrieved, for example: </p><div class="fragment"><div class="line"><span class="comment"># Retrieve Cl and Cd</span></div>
<div class="line">Cl = xfoil.output.CL</div>
<div class="line">print(<span class="stringliteral">&quot;Cl = &quot;</span>, Cl)</div>
<div class="line"> </div>
<div class="line">Cd = xfoil.output.CD</div>
<div class="line">print(<span class="stringliteral">&quot;Cd = &quot;</span>, Cd)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Angle of attack</span></div>
<div class="line">Alpha = xfoil.output.Alpha</div>
<div class="line">print(<span class="stringliteral">&quot;Alpha = &quot;</span>, Alpha)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Transition location</span></div>
<div class="line">TranX = xfoil.output.Transition_Top</div>
<div class="line">print(<span class="stringliteral">&quot;Transition location = &quot;</span>, TranX)</div>
</div><!-- fragment --><p> results in,</p>
<div class="fragment"><div class="line">Cl =  [0.951, 1.2403, 1.4266, 1.6214, 1.7724, 1.8756, 1.8507, 1.7748, 1.6766, 1.0562,</div>
<div class="line">       1.0665, 1.0767, 1.0869, 1.0969, 1.107, 1.1168, 1.1264, 1.1356, 1.1448, 1.05,</div>
<div class="line">       1.3, 1.55, 1.55, 1.55, 1.55, 1.55, 1.55, 1.55, 1.55, 1.55, 1.55, 1.55]</div>
<div class="line">Cd =  [0.01293, 0.016, 0.01916, 0.02326, 0.03022, 0.04169, 0.06602, 0.08659, 0.11208,</div>
<div class="line">       0.01387, 0.01394, 0.01403, 0.01412, 0.01422, 0.01429, 0.01439, 0.0145, 0.01462,</div>
<div class="line">       0.01476, 0.0139, 0.01704, 0.02139, 0.02139, 0.02139, 0.02139, 0.02139, 0.02139,</div>
<div class="line">       0.02139, 0.02139, 0.02139, 0.02139, 0.02139]</div>
<div class="line">Alpha =  [0.0, 3.0, 5.0, 7.0, 9.0, 11.0, 13.0, 14.0, 15.0, 1.1, 1.2, 1.3, 1.4, 1.5,</div>
<div class="line">          1.6, 1.7, 1.8, 1.9, 2.0, 1.055, 3.66, 6.227, 6.227, 6.227, 6.227, 6.227,</div>
<div class="line">          6.227, 6.227, 6.227, 6.227, 6.227, 6.227]</div>
</div><!-- fragment --><h1><a class="anchor" id="runfun3dTetgenExample"></a>
Executing pyCAPS script</h1>
<p>Issuing the following command executes the script:</p>
<div class="fragment"><div class="line">python xfoil_PyTest.py</div>
</div><!-- fragment --><p>Below is a representative image obtained by plotting the data presented above: </p><div class="image">
<img src="xFoil_Ex1.png" alt="" width="500px"/>
<div class="caption">
xFoil generated lift and drag coefficients for various angles of attack</div></div>
  </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jul 2 2022 10:13:22 for xFoil Analysis Interface Module (AIM) by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
