<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Awave Analysis Interface Module (AIM): Awave AIM Examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Awave Analysis Interface Module (AIM)
   </div>
   <div id="projectbrief">Awave Analysis Interface Module (AIM)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Awave AIM Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#awaveAimPrereq">Prerequisites</a><ul><li class="level2"><a href="#awaveReqfiles">Script files</a></li>
</ul>
</li>
<li class="level1"><a href="#createGeom">Creating Geometry using ESP</a></li>
<li class="level1"><a href="#awavePyCAPS">Performing analysis using pyCAPS</a></li>
</ul>
</div>
<div class="textblock"><p>This is a walkthrough for using Awave AIM to analyze a wing, tail, fuselage configuration.</p>
<h1><a class="anchor" id="awaveAimPrereq"></a>
Prerequisites</h1>
<p>It is presumed that ESP and CAPS have been already installed, as well as Awave. Furthermore, a user should have knowledge on the generation of parametric geometry in Engineering Sketch Pad (ESP) before attempting to integrate with any AIM. Specifically this example makes use of Design Parameters, Set Parameters, User Defined Primitive (UDP) and attributes in ESP.</p>
<h2><a class="anchor" id="awaveReqfiles"></a>
Script files</h2>
<p>Two scripts are used for this illustration:</p><ol type="1">
<li>awaveWingTailFuselage.csm: Creates geometry, as described in the following section.</li>
<li>awave_PyTest.py: pyCAPS script for performing analysis, as described in <a class="el" href="awaveExample.html#awavePyCAPS">Performing analysis using pyCAPS</a>.</li>
</ol>
<h1><a class="anchor" id="createGeom"></a>
Creating Geometry using ESP</h1>
<p>First step is to define the analysis intention that the geometry is intended support. </p><div class="fragment"><div class="line">attribute capsAIM $awaveAIM</div></div><!-- fragment --><p> Next we will define the design parameters to define the wing cross section and planform. </p><div class="fragment"><div class="line">despmtr   thick     0.12      frac of local chord</div><div class="line">despmtr   camber    0.04      frac of local chord</div><div class="line">despmtr   tlen      5.00      length from wing LE to Tail LE</div><div class="line">despmtr   toff      0.5       tail offset</div><div class="line"></div><div class="line">despmtr   area      10.0</div><div class="line">despmtr   aspect    6.00</div><div class="line">despmtr   taper     0.60</div><div class="line">despmtr   sweep     20.0      deg (of c/4)</div><div class="line"></div><div class="line">despmtr   washout  -5.00      deg (down at tip)</div><div class="line">despmtr   dihedral  4.00      deg</div></div><!-- fragment --><p> The design parameters will then be used to set parameters for use internally to create geometry. </p><div class="fragment"><div class="line">set       span      sqrt(aspect*area)</div><div class="line">set       croot     2*area/span/(1+taper)</div><div class="line">set       ctip      croot*taper</div><div class="line">set       dxtip     (croot-ctip)/4+span/2*tand(sweep)</div><div class="line">set       dztip     span/2*tand(dihedral)</div></div><!-- fragment --><p> Next the Wing, Vertical and Horizontal tails are created using the <em>naca</em> User Defined Primitive (UDP). The inputs used for this example to the UDP are Thickness and Camber. The naca sections generated are in the X-Y plane and are rotated to the X-Z plane. They are then translated to the appropriate position based on the design and set parameters defined above. Finally reference area can be given to the Awave AIM by using the <b>capsReferenceArea</b> attribute. If this attribute exists on any body that value is used otherwise the default is 1.0.</p>
<p>In addition, each section has a <b>capsType</b> attribute. This is used to define the type of surface being create into a lifting surface or a body. The other attribute found on the first wing section is <b>capsGroup</b>. This is used to logically group cross section of a give <b>capsType</b> type together. More information on this can be found in the <a class="el" href="attributeAwave.html">AIM Attributes</a> section. </p><div class="fragment"><div class="line"># right tip</div><div class="line">udprim    naca      Thickness thick     Camber    camber</div><div class="line">attribute capsReferenceArea area</div><div class="line">attribute capsType   $Wing</div><div class="line">attribute capsGroup    $Wing</div><div class="line">scale     ctip</div><div class="line">rotatex   90        0         0</div><div class="line">rotatey   washout   0         ctip/4</div><div class="line">translate dxtip    -span/2    dztip</div><div class="line"></div><div class="line"># root</div><div class="line">udprim    naca      Thickness thick     Camber    camber</div><div class="line">attribute capsType   $Wing</div><div class="line">attribute capsGroup    $Wing</div><div class="line">rotatex   90        0         0</div><div class="line">scale     croot</div><div class="line"></div><div class="line"># left tip</div><div class="line">udprim    naca      Thickness thick     Camber    camber</div><div class="line">attribute capsType  $Wing</div><div class="line">attribute capsGroup    $Wing</div><div class="line">scale     ctip</div><div class="line">rotatex   90        0         0</div><div class="line">rotatey   washout   0         ctip/4</div><div class="line">translate dxtip     span/2    dztip</div></div><!-- fragment --><p> Vertical Tail definition </p><div class="fragment"><div class="line"># tip</div><div class="line">udprim    naca      Thickness thick</div><div class="line">attribute capsType  $VTail</div><div class="line">attribute capsGroup   $VertTail</div><div class="line">scale     0.75*ctip</div><div class="line">translate tlen+0.75*(croot-ctip) 0.0 ctip+toff</div><div class="line"></div><div class="line"># base</div><div class="line">udprim    naca      Thickness thick</div><div class="line">attribute capsType  $VTail</div><div class="line">attribute capsGroup   $VertTail</div><div class="line">scale     0.75*croot</div><div class="line">translate tlen 0.0 toff</div></div><!-- fragment --><p> Horizontal Tail definition </p><div class="fragment"><div class="line"># tip left</div><div class="line">udprim    naca      Thickness thick</div><div class="line">attribute capsType  $HTail</div><div class="line">attribute capsGroup   $Stab</div><div class="line">scale     0.75*ctip</div><div class="line">rotatex   90        0         0</div><div class="line">translate tlen+0.75*(croot-ctip) -ctip toff</div><div class="line"></div><div class="line"># tip left</div><div class="line">udprim    naca      Thickness thick</div><div class="line">attribute capsType  $HTail</div><div class="line">attribute capsGroup   $Stab</div><div class="line">scale     0.75*ctip</div><div class="line">rotatex   90        0         0</div><div class="line">translate tlen+0.75*(croot-ctip) 0.0 toff</div><div class="line"></div><div class="line"># tip right</div><div class="line">udprim    naca      Thickness thick</div><div class="line">attribute capsType  $HTail</div><div class="line">attribute capsGroup   $Stab</div><div class="line">scale     0.75*ctip</div><div class="line">rotatex   90        0         0</div><div class="line">translate tlen+0.75*(croot-ctip) ctip toff</div></div><!-- fragment --><p> Fuselage definition. Notice the use of the <em>ellipse</em> UDP. In this case, only translation is required to move the cross section into the desired location. </p><div class="fragment"><div class="line">skbeg -0.4*tlen 0.0 0.0</div><div class="line">skend</div><div class="line">attribute capsType $Fuse</div><div class="line">attribute capsGroup  $Fuselage</div><div class="line"></div><div class="line">udprim  ellipse ry 0.5*croot rz 0.2*croot</div><div class="line">attribute capsType $Fuse</div><div class="line">attribute capsGroup  $Fuselage</div><div class="line">translate 0.0 0.0 0.0</div><div class="line"></div><div class="line">udprim  ellipse ry 0.4*croot rz 0.1*croot</div><div class="line">attribute capsType $Fuse</div><div class="line">translate croot 0.0 0.0</div><div class="line"></div><div class="line">udprim  ellipse ry 0.1*croot rz 0.1*croot</div><div class="line">attribute capsType $Fuse</div><div class="line">attribute capsGroup  $Fuselage</div><div class="line">translate tlen 0.0 toff</div><div class="line"></div><div class="line">udprim  ellipse ry 0.01*croot rz 0.01*croot</div><div class="line">attribute capsType $Fuse</div><div class="line">attribute capsGroup  $Fuselage</div><div class="line">translate tlen+0.75*croot 0.0 toff</div></div><!-- fragment --><p> Store definition. This addition is to demonstrate the addition of a wing tip store in the Awave representation. </p><div class="fragment"><div class="line">udprim  ellipse ry 0.1*ctip rz 0.1*ctip</div><div class="line">attribute capsType $Store</div><div class="line">attribute capsGroup  $RightWingTank</div><div class="line">translate dxtip    -span/2    dztip</div><div class="line"></div><div class="line">udprim  ellipse ry 0.1*ctip rz 0.1*ctip</div><div class="line">attribute capsType $Store</div><div class="line">attribute capsGroup  $RightWingTank</div><div class="line">translate dxtip+ctip    -span/2    dztip</div><div class="line"></div><div class="line">udprim  ellipse ry 0.1*ctip rz 0.1*ctip</div><div class="line">attribute capsType $Store</div><div class="line">attribute capsGroup  $LeftWingTank</div><div class="line">translate dxtip    span/2    dztip</div><div class="line"></div><div class="line">udprim  ellipse ry 0.1*ctip rz 0.1*ctip</div><div class="line">attribute capsType $Store</div><div class="line">attribute capsGroup  $LeftWingTank</div><div class="line">translate dxtip+ctip    span/2    dztip</div></div><!-- fragment --> <h1><a class="anchor" id="awavePyCAPS"></a>
Performing analysis using pyCAPS</h1>
<p>An example pyCAPS script that uses the above *.csm file to run Awave is as follows.</p>
<p>First the pyCAPS and os module needs to be imported. </p><div class="fragment"><div class="line"><span class="comment"># Import capsProblem from pyCAPS</span></div><div class="line"><span class="keyword">from</span> pyCAPS <span class="keyword">import</span> capsProblem</div><div class="line"></div><div class="line"><span class="comment"># Import os module</span></div><div class="line"><span class="keyword">import</span> os</div></div><!-- fragment --><p> Once the modules have been loaded the problem needs to be initiated.</p>
<div class="fragment"><div class="line">myProblem = capsProblem()</div></div><!-- fragment --><p> Next local variables used throughout the script are defined. </p><div class="fragment"><div class="line">workDir = <span class="stringliteral">&quot;AwaveAnalysisTest&quot;</span></div></div><!-- fragment --><p> Next the *.csm file is loaded and design parameter is changed - area in the geometry. Any despmtr from the awaveWingTailFuselage.csm file is available inside the pyCAPS script. They are: thick, camber, area, aspect, taper, sweep, washout, dihedral...</p>
<div class="fragment"><div class="line">geometryScript = os.path.join(<span class="stringliteral">&quot;..&quot;</span>,<span class="stringliteral">&quot;csmData&quot;</span>,<span class="stringliteral">&quot;awaveWingTailFuselage.csm&quot;</span>)</div><div class="line">myGeometry = myProblem.loadCAPS(geometryScript, verbosity=args.verbosity)</div><div class="line">myGeometry.setGeometryVal(<span class="stringliteral">&quot;area&quot;</span>, 10.0)</div></div><!-- fragment --><p> The Awave AIM is then loaded with: </p><div class="fragment"><div class="line">myAnalysis = myProblem.loadAIM( aim = <span class="stringliteral">&quot;awaveAIM&quot;</span>,</div><div class="line">                                analysisDir = workDir )</div></div><!-- fragment --><p> After the AIM is loaded the Mach number and angle of attack (Alpha) are set as aimInputsAwave. The Awave AIM supports variable length inputs. For example 1, 10 or more Mach and AoA pairs can be entered. The example below shows two inputs. The length of the Mach and Alpha inputs must be the same. </p><div class="fragment"><div class="line">myAnalysis.setAnalysisVal(<span class="stringliteral">&quot;Mach&quot;</span> , [ 1.2, 1.5])</div><div class="line">myAnalysis.setAnalysisVal(<span class="stringliteral">&quot;Alpha&quot;</span>, [ 0.0, 2.0])</div></div><!-- fragment --><p> Once all the inputs have been set, preAnalysis needs to be executed. During this operation, all the necessary files to run Awave are generated and placed in the analysis working directory (analysisDir) </p><div class="fragment"><div class="line">myAnalysis.preAnalysis()</div></div><!-- fragment --><p> At this point the required files necessary run Awave should have been created and placed in the specified analysis working directory. Next Awave needs to executed such as through an OS system call (see <a class="el" href="index.html#overviewAwave">Awave AIM Overview</a> for additional details) like,</p>
<div class="fragment"><div class="line"><span class="keywordflow">print</span> (<span class="stringliteral">&quot;\n\nRunning Awave......&quot;</span>)</div><div class="line">currentDirectory = os.getcwd() <span class="comment"># Get our current working directory</span></div><div class="line"></div><div class="line">os.chdir(myAnalysis.analysisDir) <span class="comment"># Move into test directory</span></div><div class="line">os.system(<span class="stringliteral">&quot;awave awaveInput.txt &gt; Info.out&quot;</span>); <span class="comment"># Run Awave via system call</span></div><div class="line"></div><div class="line">os.chdir(currentDirectory) <span class="comment"># Move back to top directory</span></div></div><!-- fragment --><p>A call to postAnalysis is then made to check to see if Awave executed successfully and the expected files were generated. </p><div class="fragment"><div class="line">myAnalysis.postAnalysis()</div></div><!-- fragment --><p> Similar to the AIM inputs, after the execution of Awave and postAnalysis any of the AIM's output variables (<a class="el" href="aimOutputsAwave.html">AIM Outputs</a>) are readily available; for example, </p><div class="fragment"><div class="line">CdWave = myAnalysis.getAnalysisOutVal(<span class="stringliteral">&quot;CDwave&quot;</span>);</div></div><!-- fragment --><p> Printing the above variable results in, </p><div class="fragment"><div class="line">CdWave =  [0.484423786, 0.0935611948]</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 28 2020 06:21:14 for Awave Analysis Interface Module (AIM) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
